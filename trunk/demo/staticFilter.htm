<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Static Filter Demo</title>
  <link rel="stylesheet" type="text/css" href="../ext/resources/css/ext-all.css" />
  <link rel="stylesheet" type="text/css" href="../resources/cherryonext.css" />
  <script type="text/javascript" src="../ext/adapter/ext/ext-base.js"></script>
  <script type="text/javascript" src="../ext/ext-all.js"></script>
  <script type="text/javascript" src="../cherryonext.js"></script>

  <script type="text/javascript" src="mydata.js"></script>

  <style TYPE="text/css">
    .filter { font-size: 11px; }
    .centerCls {vertical-align: middle;}
  </style>

  <script language="JavaScript" type="text/javascript">
    var fieldManager;
    var filterModel;
    var localFilterResolver;
    var filterObject;

    Ext.BLANK_IMAGE_URL="../ext/resources/images/default/s.gif";

    Ext.onReady(function(){

      var filterCfg=[
        {id: 'company',label: 'Company'},
        {id: 'price',label: 'Price', type: 'float'},
        {id: 'change',label: 'Change', type: 'float'},
        {id: 'pctChange',label: '% Change', type: 'float'},
        {id: 'lastChange',label: 'Last Updated', type: 'date', format: 'd/m/Y H:i'},
        {id: 'shouldBuy',label: 'Should Buy', availableValues: availableValuesStore, remoteStore: false}
      ];

      // create the Grid
      var grid = new Ext.grid.GridPanel({
        store: store,
        columns: [
          {id:'company',header: "Company", width: 160, sortable: true, dataIndex: 'company'},
          {header: "Price", width: 75, sortable: true, renderer: 'usMoney', dataIndex: 'price'},
          {header: "Change", width: 75, sortable: true, renderer: change, dataIndex: 'change'},
          {header: "% Change", width: 75, sortable: true, renderer: pctChange, dataIndex: 'pctChange'},
          {header: "Last Updated", width: 95, sortable: true, renderer: Ext.util.Format.dateRenderer('d/m/Y H:i'), dataIndex: 'lastChange'},
          {header: "Should Buy", width: 85, sortable: true, dataIndex: 'shouldBuy'}
        ],
        stripeRows: true,
        autoExpandColumn: 'company',
        region: "center"
      });

      fieldManager=new Ext.ux.netbox.core.FieldManager(filterCfg);

      filterModel=new Ext.ux.netbox.core.FilterModel(fieldManager);
      localFilterResolver=new Ext.ux.netbox.core.LocalStoreFilterResolver(filterModel);
      filterObject={fieldId:"company", operatorId:"STRING_STARTS_WITH", values:[{label: "A",value:"A"}]};
      filterModel.addElementaryFilter(filterObject);
      var button2=new Ext.Button({text: "Apply"});
      button2.on("click",filterTable);
      var viewport = new Ext.Viewport(
          {layout: "border",
           items: [
             { filterModel: filterModel,
               colsNumber:3,
               labelWidth: 55,
               labelAlign: 'top',
               rowSize: 46,
               ratio: 33,
               labelPad: 1,
               region: "north",
               height:150,
               xtype: 'staticFilter',
               itemCls: 'filter',
               buttons: [button2]
             },
             grid
           ]
          }
        );
    });

    function filterTable(){
     store.filterBy(localFilterResolver.filter,localFilterResolver);
    }

    </script>
</head>
<body>
</body>
</html>
